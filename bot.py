from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, ContextTypes
from datetime import datetime, timezone
import pytz
import ephem
import math

MOSCOW_LAT = '55.7558'
MOSCOW_LON = '37.6173'
MOSCOW_TZ = pytz.timezone("Europe/Moscow")

recommendations = {
    1:  "üåë 1-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —Ä–æ–∂–¥–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –∏ —Ç—å–º—ã.\nüí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∑–∞—Å–µ–≤–∞–π —Å–µ–º–µ–Ω–∞ –∏–¥–µ–π, —Ñ–æ—Ä–º–∏—Ä—É–π —Ü–µ–ª–∏, –±—É–¥—å —Å–ø–æ–∫–æ–µ–Ω –∏ —Å–æ–±—Ä–∞–Ω.",
    2:  "üåí 2-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —ç–Ω–µ—Ä–≥–∏–∏.\nü™û –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ —Å–µ–±–µ, –Ω–∞—á–∏–Ω–∞–π —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –∑–∞–¥—É–º–∞–Ω–Ω–æ–µ.",
    3:  "üåì 3-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —ç–Ω–µ—Ä–≥–∏—è –¥–µ–π—Å—Ç–≤–∏—è.\n‚öîÔ∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∞–∫—Ç–∏–≤–Ω–æ –¥–µ–π—Å—Ç–≤—É–π, –Ω–∞–ø—Ä–∞–≤–ª—è—è —Å–∏–ª—ã –≤ —Å–æ–∑–∏–¥–∞–Ω–∏–µ, –∏–∑–±–µ–≥–∞–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.",
    4:  "üåî 4-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∏ –º—É–¥—Ä–æ—Å—Ç–∏.\nüìö –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–∫—Ä–µ–ø–ª—è–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–µ–ª, —É—á–∏—Å—å –∏ –≤–ø–∏—Ç—ã–≤–∞–π –æ–ø—ã—Ç –ø—Ä–µ–¥–∫–æ–≤.",
    5:  "üåï 5-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ —Å—Ç—Ä–∞—Å—Ç–∏ –∏ —Å–∏–ª—ã.\nüî• –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑—É–π —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è.",
    6:  "üåñ 6-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å –≥–∞—Ä–º–æ–Ω–∏–∏ –∏ –¥—ã—Ö–∞–Ω–∏—è.\nüí® –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∑–∞–Ω–∏–º–∞–π—Å—è –º–µ–¥–∏—Ç–∞—Ü–∏–µ–π, –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏ –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ–º.",
    7:  "üåó 7-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —Å–∏–ª–∞ —Å–ª–æ–≤–∞.\nüó£ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –º—ã—Å–ª–∏ —è—Å–Ω–æ, –∏–∑–±–µ–≥–∞–π –ª–∂–∏ –∏ –ø—É—Å—Ç—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤.",
    8:  "üåò 8-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏.\nü¶ã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏–∑–±–∞–≤–ª—è–π—Å—è –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ, –æ—Ç–∫—Ä—ã–≤–∞–π—Å—è –Ω–æ–≤–æ–º—É.",
    9:  "üåë 9-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å –∏–ª–ª—é–∑–∏–π –∏ –∏—Å–∫—É—à–µ–Ω–∏–π.\nüõ° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –±—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω, –∑–∞—â–∏—â–∞–π—Å—è –æ—Ç –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π.",
    10: "üåí 10-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —Å–∏–ª–∞ —Ä–æ–¥–∞.\nüå≥ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É–∫—Ä–µ–ø–ª—è–π —Å–µ–º–µ–π–Ω—ã–µ —Å–≤—è–∑–∏, –æ–±—Ä–∞—â–∞–π—Å—è –∫ –∏—Å—Ç–æ–∫–∞–º.",
    11: "üåì 11-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –º–æ—â–∏.\n‚ö° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑—É–π —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.",
    12: "üåî 12-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è.\nü§ù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–æ–º–æ–≥–∞–π –¥—Ä—É–≥–∏–º, –±—É–¥—å —â–µ–¥—Ä—ã–º –∏ –¥–æ–±—Ä–æ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–º.",
    13: "üåï 13-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.\n‚ôªÔ∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –º–µ–Ω—è–π —Ç–æ, —á—Ç–æ —É—Å—Ç–∞—Ä–µ–ª–æ, —É–ª—É—á—à–∞–π –∂–∏–∑–Ω—å.",
    14: "üåñ 14-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫—É–ª—å–º–∏–Ω–∞—Ü–∏–∏.\nüõ† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∑–∞–≤–µ—Ä—à–∏ –¥–µ–ª–∞, –Ω–∞–≤–µ–¥–∏ –ø–æ—Ä—è–¥–æ–∫.",
    15: "üåï 15-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –ø–æ–ª–Ω–æ–ª—É–Ω–∏–µ, –ø–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏.\nüåå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–ª—É –¥–ª—è –º–∞–≥–∏–∏ –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞, –Ω–æ –∏–∑–±–µ–≥–∞–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.",
    16: "üåó 16-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ –∏ –≥–∞—Ä–º–æ–Ω–∏—è.\nüïä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –æ—Ç–¥—ã—Ö–∞–π, –∑–∞–Ω–∏–º–∞–π—Å—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ–º –∏ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ–º.",
    17: "üåò 17-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –≤–∑–ª—ë—Ç –∏–¥–µ–π –∏ –∑–∞–º—ã—Å–ª–æ–≤.\nüéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–ª–∞–Ω–∏—Ä—É–π –±—É–¥—É—â–µ–µ, –±—É–¥—å –∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª–µ–Ω, –Ω–æ –Ω–µ —Ä–∞—Å–ø—ã–ª—è–π—Å—è.",
    18: "üåë 18-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–Ω–∏—Ü–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å.\nüíû –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–æ–º–æ–≥–∞–π –¥—Ä—É–≥–∏–º, –æ—Ç–∫—Ä—ã–≤–∞–π —Å–µ—Ä–¥—Ü–µ, –ø—Ä–æ—â–∞–π.",
    19: "üåí 19-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º—É–¥—Ä–æ—Å—Ç—å.\nü¶Å –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –¥–µ–π—Å—Ç–≤—É–π —Å–º–µ–ª–æ, –Ω–æ –æ–±–¥—É–º–∞–Ω–Ω–æ.",
    20: "üåì 20-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å –¥—É—Ö–æ–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.\nüîÆ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø—Ä–∏—Å–ª—É—à–∏–≤–∞–π—Å—è –∫ –∏–Ω—Ç—É–∏—Ü–∏–∏, –º–µ–¥–∏—Ç–∏—Ä—É–π.",
    21: "üåî 21-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –æ—á–∏—â–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.\nüíß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –æ—Å–≤–æ–±–æ–∂–¥–∞–π—Å—è –æ—Ç –ª–∏—à–Ω–µ–≥–æ, –º–µ–Ω—è–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏.",
    22: "üåï 22-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –∑–Ω–∞–Ω–∏—è –∏ —Å–∏–ª–∞.\nüìñ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —É—á–∏—Å—å, –¥–µ–ª–∏—Å—å –º—É–¥—Ä–æ—Å—Ç—å—é.",
    23: "üåñ 23-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è.\nüî• –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: —Å–º–µ–ª–æ –º–µ–Ω—è–π –∂–∏–∑–Ω—å, –Ω–æ –∏–∑–±–µ–≥–∞–π —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ—Å—Ç—É–ø–∫–æ–≤.",
    24: "üåó 24-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî —ç–Ω–µ—Ä–≥–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.\nüå± –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∑–∞–Ω–∏–º–∞–π—Å—è –æ–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏–µ–º –∏ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º —Ç–µ–ª–∞.",
    25: "üåò 25-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –¥–µ–Ω—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è.\nüßò –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –º–µ–¥–∏—Ç–∏—Ä—É–π, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–≤–æ–∏ –º—ã—Å–ª–∏.",
    26: "üåë 26-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –º—É–¥—Ä–æ—Å—Ç—å –∏ —Å–∞–º–æ–∫–æ–Ω—Ç—Ä–æ–ª—å.\nüîí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏–∑–±–µ–≥–∞–π —Å—É–µ—Ç—ã, –¥–µ—Ä–∂–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é.",
    27: "üåí 27-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.\nü™∂ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∑–∞–Ω–∏–º–∞–π—Å—è –¥—É—Ö–æ–≤–Ω—ã–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏, —Å–ª—É—à–∞–π —Å–µ—Ä–¥—Ü–µ.",
    28: "üåì 28-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –ø–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤.\nüìä –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–∂–∏—Ç—ã–π –º–µ—Å—è—Ü, –≥–æ—Ç–æ–≤—å—Å—è –∫ –Ω–æ–≤–æ–º—É —Ü–∏–∫–ª—É.",
    29: "üåî 29-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –º–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–Ω—å.\nüåå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏–∑–±–µ–≥–∞–π —Ä–∏—Å–∫–∞, –æ—á–∏—â–∞–π —Å–æ–∑–Ω–∞–Ω–∏–µ.",
    30: "üåï 30-–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å ‚Äî –Ω–æ–≤–æ–ª—É–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.\nüå± –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∑–∞–≥–∞–¥—ã–≤–∞–π –∂–µ–ª–∞–Ω–∏—è, –Ω–∞—á–∏–Ω–∞–π —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞."
}

def calculate_lunar_day(now):
    """–¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ª—É–Ω–Ω–æ–≥–æ –¥–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —ç—Ñ–µ–º–µ—Ä–∏–¥"""
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –Ω–æ–≤–æ–ª—É–Ω–∏—è (24.07.2025 19:11 UTC)
    prev_new_moon = ephem.Date('2025/7/24 19:11:00')
    next_new_moon = ephem.next_new_moon(prev_new_moon)
    
    # –í—ã—á–∏—Å–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –≤–æ–∑—Ä–∞—Å—Ç –õ—É–Ω—ã –≤ —Å—É—Ç–∫–∞—Ö
    current_date_ephem = ephem.Date(now)
    moon_age = current_date_ephem - prev_new_moon
    
    # –°—Ä–µ–¥–Ω—è—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª—É–Ω–Ω–æ–≥–æ –º–µ—Å—è—Ü–∞ (29.53 –¥–Ω—è)
    lunar_month = 29.530588
    
    # –í—ã—á–∏—Å–ª—è–µ–º —Ç–µ–∫—É—â–∏–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å
    lunar_day = int((moon_age % lunar_month) / (lunar_month / 30)) + 1
    lunar_day = min(lunar_day, 30)
    
    # –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ª—É–Ω–Ω–æ–≥–æ –¥–Ω—è
    next_day_start = prev_new_moon + ((lunar_day) * (lunar_month / 30))
    
    # –ï—Å–ª–∏ –º—ã —É–∂–µ –ø—Ä–æ—à–ª–∏ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –±–µ—Ä–µ–º —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
    if next_day_start <= current_date_ephem:
        lunar_day = lunar_day + 1 if lunar_day < 30 else 1
        next_day_start = prev_new_moon + ((lunar_day) * (lunar_month / 30))
    
    return lunar_day, next_day_start

def ephem_to_datetime(ephem_date):
    """–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ephem.Date –≤ datetime —Å —É—á–µ—Ç–æ–º UTC"""
    dt = ephem.Date(ephem_date).datetime()
    return dt.replace(tzinfo=timezone.utc)

async def lunar_day_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    try:
        now_utc = datetime.now(timezone.utc)
        lunar_day, next_transition = calculate_lunar_day(now_utc)
        
        next_transition_utc = ephem_to_datetime(next_transition)
        next_transition_msk = next_transition_utc.astimezone(MOSCOW_TZ)
        
        response = (
            f"‚ú® –¢–æ—á–Ω—ã–π –ª—É–Ω–Ω—ã–π –¥–µ–Ω—å: {lunar_day}-–π\n\n"
            f"{recommendations.get(lunar_day, '')}\n\n"
            f"‚è≠ –°–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å: {next_transition_msk.strftime('%d.%m.%Y %H:%M')}"
        )
        
        await update.message.reply_text(response)
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞: {str(e)}")
        await update.message.reply_text("‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.")

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "üåô –Ø - —Ç–æ—á–Ω—ã–π –ª—É–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å!\n"
        "–û—Ç–ø—Ä–∞–≤—å—Ç–µ /lunar –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ª—É–Ω–Ω–æ–≥–æ –¥–Ω—è."
    )

if __name__ == '__main__':
    app = ApplicationBuilder().token("8494483497:AAF5yS3zf0Ndf-esD2FXXNH7HGX1kolHW10").build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("lunar", lunar_day_handler))
    app.run_polling()
